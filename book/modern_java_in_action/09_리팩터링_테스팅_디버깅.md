# ë¦¬íŒ©í„°ë§, í…ŒìŠ¤íŒ…, ë””ë²„ê¹…

# ê°€ë…ì„±ê³¼ ìœ ì—°ì„±ì„ ê°œì„ í•˜ëŠ” ë¦¬íŒ©í„°ë§

<div align="center">

> ëŒë‹¤ í‘œí˜„ì‹ì„ ì´ìš©í•œ ì½”ë“œëŠ” ë‹¤ì–‘í•œ ìš”êµ¬ì‚¬í•­ ë³€í™”ì— ëŒ€ì‘í•  ìˆ˜ ìˆë„ë¡ ë™ì‘ì„ íŒŒë¼ë¯¸í„°í™”í•œë‹¤.

</div>

## ìµëª… í´ë˜ìŠ¤ â¡ï¸ ëŒë‹¤ í‘œí˜„ì‹

### ìµëª… í´ë˜ìŠ¤ë¥¼ ëŒë‹¤ í‘œí˜„ì‹ìœ¼ë¡œ ë³€í™˜í•  ìˆ˜ ì—†ëŠ” ê²½ìš°

1. **ìµëª… í´ë˜ìŠ¤ì—ì„œ ì‚¬ìš©í•œ thisì™€ superëŠ” ëŒë‹¤ í‘œí˜„ì‹ì—ì„œ ë‹¤ë¥¸ ì˜ë¯¸ë¥¼ ê°–ëŠ”ë‹¤**
   - ìµëª… í´ë˜ìŠ¤ this : ìµëª… í´ë˜ìŠ¤ ìì‹ 
   - ëŒë‹¤ this : ëŒë‹¤ë¥¼ ê°ì‹¸ëŠ” í´ë˜ìŠ¤
2. **ìµëª… í´ë˜ìŠ¤ëŠ” ê°ì‹¸ê³  ìˆëŠ” í´ë˜ìŠ¤ì˜ ë³€ìˆ˜ë¥¼ ê°€ë¦´ ìˆ˜ ìˆë‹¤(ì„€ë„ ë³€ìˆ˜)**

   ```java
   int a = 10;
   Runnable r1 = () -> {
     int a = 2; // ì»´íŒŒì¼ ì—ëŸ¬
     System.out.println(a);
   };

   Runnable r2 = new Runnable() {
     @Override
     public void run() {
         int a = 2;
         System.out.println(a);
     }
   };
   ```

3. **ìµëª… í´ë˜ìŠ¤ë¥¼ ëŒë‹¤ í‘œí˜„ì‹ìœ¼ë¡œ ë°”ê¾¸ë©´ ì½˜í…ìŠ¤íŠ¸ ì˜¤ë²„ë¡œë”©ì— ë”°ë¥¸ ëª¨í˜¸í•¨ì´ ì´ˆë˜ ë  ìˆ˜ ìˆë‹¤**

   - ìµëª… í´ë˜ìŠ¤ : ì¸ìŠ¤í„´ìŠ¤í™”í•  ë•Œ ëª…ì‹œì ìœ¼ë¡œ í˜•ì‹ ì •í•´ì§
   - ëŒë‹¤ : í˜•ì‹ì´ ì½˜í…ìŠ¤íŠ¸ì— ë”°ë¼ ë‹¬ë¼ì§

   ```java
   interface Task {
       public void execute();
   }

   public static void doSomething(Runnable r) {
       r.run();
   }

   public static void doSomething(Task a) {
       a.execute();
   }

   doSomething(new Task() {
     @Override
     public void execute() {
         System.out.println("Danger danger!!");
     }
   });

   doSomething(() -> System.out.println("Danger danger!!"));
   // doSomethis(Runnable)ì¸ì§€ doSomething(Task)ì¸ì§€ ì•Œ ìˆ˜ ì—†ìŒ

   doSomething((Task)() -> System.out.println("Danger danger!!"));
   // ëª…ì‹œì  í˜•ë³€í™˜ì„ í†µí•´ ëª¨í˜¸í•¨ ì œê±° ê°€ëŠ¥
   ```

## ëŒë‹¤ í‘œí˜„ì‹ â¡ï¸ ë©”ì„œë“œ ì°¸ì¡°

```java
// ë¹„êµ êµ¬í˜„ì— ì‹ ê²½ ì¨ì•¼ í•¨
inventory.sort(
       (Apple a1, Apple a2) -> a1.getWeight().compareTo(a2.getWeight())
);

// ì •ì  í—¬í¼ ë©”ì„œë“œ comparing ì‚¬ìš© â¡ï¸ ì½”ë“œê°€ ë¬¸ì œ ìì²´ë¥¼ ì„¤ëª…
inventory.sort(Comparator.comparing(Apple::getWeight));
```

```java
// ëŒë‹¤ í‘œí˜„ì‹ + ì €ìˆ˜ì¤€ ë¦¬ë“€ì‹± ì—°ì‚° ì¡°íšŒ
int totalCalories = menu.stream()
       .map(Dish::getCalories)
       .reduce(0, (c1, c2) -> c1 + c2);

// íŠ¹í™” ìŠ¤íŠ¸ë¦¼ ì‚¬ìš© â¡ï¸ ì½”ë“œì˜ ì˜ë„ê°€ ë” ëª…í™•
int totalCalories2 = menu.stream().mapToInt(Dish::getCalories).sum();
```

## ëª…ë ¹í˜• ë°ì´í„° ì²˜ë¦¬ â¡ï¸ ìŠ¤íŠ¸ë¦¼

- ìŠ¤íŠ¸ë¦¼ APIëŠ” ë°ì´í„° ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸ì˜ ì˜ë„ë¥¼ ë” ëª…í™•í•˜ê²Œ ë³´ì—¬ì¤Œ
- ì‡¼íŠ¸ì„œí‚· + ê²Œìœ¼ë¦„ = ê°•ë ¥í•œ ìµœì í™”
- ì‰½ê²Œ ë³‘ë ¬í™” ê°€ëŠ¥

```java
List<String> dishNames = new ArrayList<>();
for (Dish dish: menu) {
   if (dish.getCalories() > 300) { // í•„í„°ë§
       dishNames.add(dish.getName()); // ì¶”ì¶œ
   }
}

List<String> dishNames2 = menu.parallelStream()
       .filter(d -> d.getCalories() > 300)
       .map(Dish::getName)
       .toList();
```

## ì½”ë“œ ìœ ì—°ì„± ê°œì„ 

### ì¡°ê±´ë¶€ ì—°ê¸° ì‹¤í–‰

- íŠ¹ì • ì¡°ê±´ì´ ì¶©ì¡±ë  ë•Œ ì½”ë“œë¥¼ ì‹¤í–‰

```java
// 1ï¸âƒ£
if (logger.isLoggable(Level.FINER)) { // isLoggableì— ì˜í•´ loggerì˜ ì½”ë“œê°€ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë¡œ ë…¸ì¶œ
    logger.finer("Problem: " + generateDiagnostic());
}
// ë©”ì‹œì§€ë¥¼ ë¡œê¹…í•  ë•Œë§ˆë‹¤ logger ê°ì²´ì˜ ìƒíƒœë¥¼ ë§¤ë²ˆ í™•ì¸

// 2ï¸âƒ£
logger.log(Level.FINER, "Problem: " + generateDiagnostic());
// logger ë ˆë²¨ì´ FINERê°€ ì•„ë‹ˆì–´ë„ ë©”ì„¸ì§€ í‰ê°€

// 3ï¸âƒ£
logger.log(Level.FINER, () -> "Problem: " + generateDiagnostic());
// logger ë ˆë²¨ì´ FINERì¼ ë•Œë§Œ ëŒë‹¤ ì‹¤í–‰
// ë¶ˆí•„ìš”í•œ ë¬¸ìì—´ ì—°ì‚° ë° ê°ì²´ ìƒì„±ì„ í”¼í•  ìˆ˜ ìˆìŒ
```

```java
// 2ï¸âƒ£ ë‚´ë¶€ ì½”ë“œ
public void log(Level level, String msg) {
    if (!isLoggable(level)) {
        return;
    }
    LogRecord lr = new LogRecord(level, msg);
    doLog(lr);
}

// 3ï¸âƒ£ ë‚´ë¶€ ì½”ë“œ
public void log(Level level, Supplier<String> msgSupplier) {
    if (!isLoggable(level)) {
        return;
    }
    LogRecord lr = new LogRecord(level, msgSupplier.get());
    doLog(lr);
}
```

- í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì—ì„œ ê°ì²´ ìƒíƒœë¥¼ ìì£¼ í™•ì¸í•˜ê±°ë‚˜ ê°ì²´ì˜ ì¼ë¶€ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ìƒí™©
  - ë‚´ë¶€ì ìœ¼ë¡œ ê°ì²´ì˜ ìƒíƒœë¥¼ í™•ì¸í•œ ë‹¤ìŒ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤
    - â¡ï¸ ì½”ë“œ ê°€ë…ì„±, ìº¡ìŠí™” ê°•í™”(ê°ì²´ ìƒíƒœê°€ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë¡œ ë…¸ì¶œë˜ì§€ ì•ŠìŒ)

### ì‹¤í–‰ ì–´ë¼ìš´ë“œ

- ë§¤ë²ˆ ê°™ì€ ì¤€ë¹„, ì¢…ë£Œ ê³¼ì •ì„ ë°˜ë³µì ìœ¼ë¡œ ìˆ˜í–‰í•˜ëŠ” ì½”ë“œ
- `ì‹¤í–‰ ì–´ë¼ìš´ë“œ íŒ¨í„´` : ì‹¤ì œ ìì›ì„ ì²˜ë¦¬í•˜ëŠ” ì½”ë“œë¥¼ ì„¤ì •ê³¼ ì •ë¦¬ ë‘ ê³¼ì •ì´ ë‘˜ëŸ¬ì‹¸ëŠ” í˜•íƒœ

<div align="center">

<img src="img/3.png" width="300px" />

</div>

```java
@FunctionalInterface
public interface BufferedReaderProcessor {
    String process(BufferedReader b) throws IOException;
}

public static String processFile(BufferedReaderProcessor p) throws IOException {
    try (BufferedReader br = new BufferedReader(new FileReader("data.txt"))) {
        return p.process(br); // ì¸ìˆ˜ë¡œ ì „ë‹¬ëœ BufferedReaderProcessor ì‹¤í–‰
    }
}

// í´ë¼ì´ì–¸íŠ¸
String oneLine = processFile(BufferedReader::readLine); // ëŒë‹¤ ì „ë‹¬
String twoLine = processFile((BufferedReader b) -> b.readLine() + b.readLine()); // ëŒë‹¤ ì „ë‹¬
```

<br />

---

<br />

# ëŒë‹¤ë¡œ ê°ì²´ì§€í–¥ ë””ìì¸ íŒ¨í„´ ë¦¬íŒ©í„°ë§

- `ë””ìì¸ íŒ¨í„´` : ê³µí†µì ì¸ ì†Œí”„íŠ¸ì›¨ì–´ ë¬¸ì œë¥¼ ì„¤ê³„í•  ë•Œ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê²€ì¦ëœ ì²­ì‚¬ì§„ì„ ì œê³µ
- ëŒë‹¤ë¥¼ ì´ìš©í•˜ë©´ ë””ìì¸ íŒ¨í„´ìœ¼ë¡œ í•´ê²°í•˜ë˜ ë¬¸ì œë¥¼ ë” ì‰½ê³  ê°„ë‹¨í•˜ê²Œ í•´ê²°í•  ìˆ˜ ìˆë‹¤

## `ì „ëµ íŒ¨í„´`

- í•œ ìœ í˜•ì˜ ì•Œê³ ë¦¬ì¦˜ì„ ë³´ìœ í•œ ìƒíƒœì—ì„œ ëŸ°íƒ€ì„ì— ì ì ˆí•œ ì•Œê³ ë¦¬ì¦˜ì„ ì„ íƒí•˜ëŠ” ê¸°ë²•
  - ë‹¤ì–‘í•œ ê¸°ì¤€ì„ ê°–ëŠ” ì…ë ¥ê°’ ê²€ì¦, ë‹¤ì–‘í•œ íŒŒì‹± ë°©ë²• ì‚¬ìš©, ì…ë ¥ í˜•ì‹ ì„¤ì • ...

<img src="img/6.png" />

### ì¸í„°í˜ì´ìŠ¤

```java
public interface ValidationStrategy {
    boolean execute(String s);
}
```

### êµ¬í˜„ì²´

```java
public class IsAllLowerCase implements ValidationStrategy{
    @Override
    public boolean execute(String s) {
        return s.matches("[a-z]+");
    }
}

public class IsNumeric implements ValidationStrategy{
    @Override
    public boolean execute(String s) {
        return s.matches("\\d+");
    }
}
```

### í´ë¼ì´ì–¸íŠ¸

```java
public class Validator {
    private final ValidationStrategy strategy;

    public Validator(ValidationStrategy strategy) {
        this.strategy = strategy;
    }

    public boolean validate(String s) {
        return strategy.execute(s);
    }
}

Validator numericValidator = new Validator(new IsNumeric());
boolean b1 = numericValidator.validate("aaa"); // false
Validator lowerCaseValidator = new Validator(new IsAllLowerCase());
boolean b2 = lowerCaseValidator.validate("bbb"); // true
```

### `ëŒë‹¤ í‘œí˜„ì‹ ì‚¬ìš©`

- êµ¬í˜„ì²´ë¥¼ êµ¬í˜„í•  í•„ìš” ì—†ì´ ëŒë‹¤ì‹ìœ¼ë¡œ ê°„í¸í•˜ê²Œ ë°”ë¡œ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤

```java
Validator numericValidatorLambda = new Validator((String s) -> s.matches("\\d+"));
boolean b3 = numericValidatorLambda.validate("aaa"); // false
Validator lowerCaseValidatorLambda = new Validator((String s) -> s.matches("[a-z]+"));
boolean b4 = lowerCaseValidatorLambda.validate("bbb"); // true
```

## `í…œí”Œë¦¿ ë©”ì„œë“œ íŒ¨í„´`

- ì•Œê³ ë¦¬ì¦˜ì˜ ê°œìš”ë¥¼ ì œì‹œí•œ ë‹¤ìŒì— ì•Œê³ ë¦¬ì¦˜ì˜ ì¼ë¶€ë¥¼ ê³ ì¹  ìˆ˜ ìˆëŠ” ìœ ì—°í•¨ì„ ì œê³µí•´ì•¼ í•  ë•Œ

### ì¶”ìƒ í´ë˜ìŠ¤

```java
public abstract class OnlineBanking {
    public void processCustomer(int id) {
        Customer c = Database.getCustomerWithId(id);
        makeCustomerHappy(c);
    }

    abstract void makeCustomerHappy(Customer c);
}
```

- OnlineBanking í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì•„ makeCustomerHappy ë©”ì„œë“œê°€ ì›í•˜ëŠ” ë™ì‘ ìˆ˜í–‰í•˜ë„ë¡ êµ¬í˜„

### `ëŒë‹¤ í‘œí˜„ì‹ ì‚¬ìš©`

```java
public void processCustomer(int id, Consumer<Customer> makeCustomerHappy) {
  // makeCustoemrHappy ì¸ìˆ˜ ì¶”ê°€
    Customer c = Database.getCustomerWithId(id);
    makeCustomerHappy.accept(c);
}
```

- OnlineBanking í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì§€ ì•Šê³  ëŒë‹¤ í‘œí˜„ì‹ ì „ë‹¬í•˜ì—¬ ë‹¤ì–‘í•œ ë™ì‘ ì¶”ê°€ ê°€ëŠ¥

```java
new OnlineBanking().processCustomer(1337, (Cusomer c) -> System.out.println("Hello " + c.getName()));
```

## `ì˜µì €ë²„ íŒ¨í„´`

- ì–´ë–¤ ì´ë²¤íŠ¸ê°€ ë°œìƒí–ˆì„ ë•Œ í•œ ê°ì²´(ì£¼ì œ)ê°€ ë‹¤ë¥¸ ê°ì²´ ë¦¬ìŠ¤íŠ¸(ì˜µì €ë²„)ì— ìë™ìœ¼ë¡œ ì•Œë¦¼ì„ ë³´ë‚´ì•¼ í•  ë•Œ

<img src="img/7.png" />

### ì˜µì €ë²„ ì¸í„°í˜ì´ìŠ¤

```java
public interface Observer {
    void notify(String tweet);
}
```

### ì—¬ëŸ¬ ì˜µì €ë²„ ì •ì˜

```java
public class NYTimes implements Observer {
    @Override
    public void notify(String tweet) {
        if (tweet != null && tweet.contains("money")) {
            System.out.println("Breaking news in NY! " + tweet);
        }
    }
}
```

```java
public class Guardian implements Observer{
    @Override
    public void notify(String tweet) {
        if (tweet != null && tweet.contains("queen")) {
            System.out.println("Yet more news from London... " + tweet);
        }
    }
}
```

### ì£¼ì œ ì¸í„°í˜ì´ìŠ¤

```java
public interface Subject {
    void registerObserver(Observer o);
    void notifyObservers(String tweet);
}
```

### ì£¼ì œ êµ¬í˜„

```java
public class Feed implements Subject {
    private final List<Observer> observers = new ArrayList<>();

    @Override
    public void registerObserver(Observer o) {
        this.observers.add(o);
    }

    @Override
    public void notifyObservers(String tweet) {
        observers.forEach(o -> o.notify(tweet));
    }
}

Feed f = new Feed();
f.registerObserver(new NYTimes());
f.registerObserver(new Guardian());
f.notifyObservers("The queen said her favorite book is Modern Java in Action!");
// Yet more news from London... The queen said her favorite book is Modern Java in Action!
```

### `ëŒë‹¤ í‘œí˜„ì‹ ì‚¬ìš©`

- ì˜µì €ë²„ê°€ ìƒíƒœë¥¼ ê°€ì§€ë©°, ì—¬ëŸ¬ ë©”ì„œë“œë¥¼ ì •ì˜í•˜ëŠ” ë“± ë³µì¡í•˜ë‹¤ë©´ ê¸°ì¡´ì˜ í´ë˜ìŠ¤ êµ¬í˜„ ë°©ì‹ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë” íš¨ìœ¨ì 

<br />
<div align="center">

> ëŒë‹¤ëŠ” ë¶ˆí•„ìš”í•œ ê°ì‹¸ëŠ” ì½”ë“œ ì œê±° ì „ë¬¸ê°€ ğŸ˜

</div>
<br />

- ì˜µì €ë²„ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì¸ìŠ¤í„´ìŠ¤í™”í•˜ì§€ ì•Šê³  ëŒë‹¤ í‘œí˜„ì‹ì„ ì§ì ‘ ì „ë‹¬í•´ì„œ ì‹¤í–‰í•  ë™ì‘ì„ ì§€ì •í•  ìˆ˜ ìˆë‹¤

```java
f.registerObserver(((String tweet) -> {
    if (tweet != null && tweet.contains("queen")) {
        System.out.println("Yet more news from London... " + tweet);
    }
}));
```

## `ì˜ë¬´ ì²´ì¸ íŒ¨í„´`

- ì‘ì—… ì²˜ë¦¬ ê°ì²´ì˜ ì²´ì¸ì„ ë§Œë“¤ ë•Œ
  - í•œ ê°ì²´ê°€ ì–´ë–¤ ì‘ì—…ì„ ì²˜ë¦¬í•œ ë‹¤ìŒì— ë‹¤ë¥¸ ê°ì²´ë¡œ ê²°ê³¼ë¥¼ ì „ë‹¬í•˜ê³ , ë‹¤ë¥¸ ê°ì²´ë„ í•´ì•¼ í•  ì‘ì—…ì„ ì²˜ë¦¬í•œ ë‹¤ìŒì— ë˜ ë‹¤ë¥¸ ê°ì²´ë¡œ ì „ë‹¬

<div align="center">
<img src="img/8.png" />
</div>

### ì‘ì—… ì²˜ë¦¬ ì¶”ìƒ í´ë˜ìŠ¤

```java
public abstract class ProcessingObject<T> {
    protected ProcessingObject<T> successor;

    public void setSuccessor(ProcessingObject<T> successor) {
        this.successor = successor;
    }

    public T handle(T input) {
        T r = handleWork(input); // í˜„ì¬ ì‘ì—… ì²˜ë¦¬ í´ë˜ìŠ¤ì˜ handleWork ìˆ˜í–‰

        if (successor == null) { // successorê°€ ì—†ìœ¼ë©´ ê·¸ëƒ¥ rì„ ë¦¬í„´
            return handleWork(r);
        }
        return successor.handleWork(r);
        // successorê°€ ìˆìœ¼ë©´ í˜„ì¬ ì‘ì—… ì²˜ë¦¬ í´ë˜ìŠ¤ì—ì„œ ì²˜ë¦¬ëœ ê²°ê³¼
        // â¡ï¸ successor í´ë˜ìŠ¤ì˜ handelWork ì¸ìë¡œ ì „ë‹¬í•˜ì—¬ ìˆ˜í–‰í•œ ê²°ê³¼ë¥¼ ë¦¬í„´
    }

    abstract protected T handleWork(T input);
}
```

### ì¶”ìƒ í´ë˜ìŠ¤ êµ¬í˜„

```java
public class HeaderTextProcessing extends ProcessingObject<String> {
    @Override
    protected String handleWork(String text) {
        return "From Raoul, Mario and Alan: " + text;
    }
}
```

```java
public class SpellCheckerProcessing extends ProcessingObject<String> {
    @Override
    protected String handleWork(String text) {
        return text.replaceAll("labda", "lambda");
    }
}
```

### ì‚¬ìš©

```java
ProcessingObject<String> p1 = new HeaderTextProcessing();
ProcessingObject<String> p2 = new SpellCheckerProcessing();

p1.setSuccessor(p2); // ë‘ ì‘ì—… ì²˜ë¦¬ ê°ì²´ ì—°ê²°

// headerë¥¼ ì¶”ê°€
// â¡ï¸ ìŠ¤í ë§ ì²´í¬
String result = p1.handle("Aren't labdas really sexy?!!");
// From Raoul, Mario and Alan: Aren't lambdas really sexy?!!
```

### `ëŒë‹¤ í‘œí˜„ì‹ ì‚¬ìš©`

- ì¶”ìƒ í´ë˜ìŠ¤ ë° êµ¬í˜„ í´ë˜ìŠ¤ ëª¨ë‘ í•„ìš” ì—†ì–´ì§

```java
UnaryOperator<String> headerProcessing = (String text) -> "From Raoul, Mario and Alan: " + text;
UnaryOperator<String> spellCheckerProcessing = (String text) -> text.replaceAll("labda", "lambda");
Function<String, String> pipeline = headerProcessing.andThen(spellCheckerProcessing);
String result2 = pipeline.apply("Aren't labdas really sexy?!!");
// From Raoul, Mario and Alan: Aren't lambdas really sexy?!!
```

## `íŒ©í† ë¦¬ íŒ¨í„´`

- ì¸ìŠ¤í„´ìŠ¤í™” ë¡œì§ì„ í´ë¼ì´ì–¸íŠ¸ì— ë…¸ì¶œí•˜ì§€ ì•Šê³  ê°ì²´ë¥¼ ë§Œë“¤ ë•Œ
- ìƒì„±ìì™€ ì„¤ì •ì„ ì™¸ë¶€ë¡œ ë…¸ì¶œí•˜ì§€ ì•ŠìŒìœ¼ë¡œì¨ í´ë¼ì´ì–¸íŠ¸ê°€ ë‹¨ìˆœí•˜ê²Œ ìƒí’ˆì„ ìƒì‚°í•  ìˆ˜ ìˆë‹¤

```java
public class ProductFactory {
    public static Product createProduct(String name) {
        switch (name) {
            case "loan":
                return new Loan();
            case "stock":
                return new Stock();
            case "bond":
                return new Bond();
            default:
                throw new RuntimeException("No such Product: " + name);
        }
    }
}

Product p = ProductFactory.createProduct("loan");
```

### `ëŒë‹¤ í‘œí˜„ì‹ ì‚¬ìš©`

```java
public class ProductFactory {
    final static Map<String, Supplier<Product>> map = Map.ofEntries(
            Map.entry("loan", Loan::new), // ëŒë‹¤ ë©”ì„œë“œ ì°¸ì¡° (Supplier<Product>)
            Map.entry("stock", Stock::new),
            Map.entry("bond", Bond::new)
    );

    public static Product createProduct(String name) {
        Supplier<Product> p = map.get(name);
        if (p != null) {
            return p.get();
        }
        throw new IllegalArgumentException("No Such product: " + name);
    }
}
```

# ëŒë‹¤ í…ŒìŠ¤íŒ…

```java
public class Point {
    private final int x;
    private final int y;

    public Point(int x, int y) {
        this.x = x;
        this.y = y;
    }

    public int getX() {
        return this.x;
    }

    public int getY() {
        return this.y;
    }

    public Point moveRightBy(int x) {
        return new Point(this.x + x, this.y);
    }
}
```

## ë³´ì´ëŠ” ëŒë‹¤ í‘œí˜„ì‹ì˜ ë™ì‘ í…ŒìŠ¤íŒ…

```java
// Pointì˜ í•„ë“œì— ì¶”ê°€
public final static Comparator<Point> compareByXAndThenY =
        Comparator.comparing(Point::getX).thenComparing(Point::getY);
```

```java
@Test
public void testMoveRightBy() throws Exception {
    Point p1 = new Point(5, 5);

    assertThat(p1.moveRightBy(10).getX())
            .isEqualTo(15);
}
```

### ëŒë‹¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ë©”ì„œë“œì˜ ë™ì‘ì— ì§‘ì¤‘í•˜ë¼

- ë©”ì„œë“œì˜ ë™ì‘ì„ í…ŒìŠ¤íŠ¸í•¨ìœ¼ë¡œì¨ ëŒë‹¤ë¥¼ ê³µê°œí•˜ì§€ ì•Šìœ¼ë©´ì„œë„ ëŒë‹¤ í‘œí˜„ì‹ì„ ê²€ì¦

```java
public static List<Point> moveAllPointsRightBy(List<Point> points, int x) {
    return points.stream()
            .map(p -> new Point(p.getX() + x, p.getY())) // ëŒë‹¤ í‘œí˜„ì‹ì„ ì§ì ‘ í…ŒìŠ¤íŠ¸í•˜ì§€ ì•ŠìŒ
            .toList();
}
```

```java
@Test
public void testMoveAllPointsRightBy() {
    List<Point> points = List.of(new Point(5, 5), new Point(10, 5));
    List<Point> expected = List.of(new Point(15, 5), new Point(20, 5));

    assertThat(Point.moveAllPointsRightBy(points, 10).stream().map(Point::getX).toList())
            .isEqualTo(expected.stream().map(Point::getX).toList());
}
```

### ê³ ì°¨ì› í•¨ìˆ˜ í…ŒìŠ¤íŒ…

- `ê³ ì°¨ì› í•¨ìˆ˜` : í•¨ìˆ˜ë¥¼ ì¸ìˆ˜ë¡œ ë°›ê±°ë‚˜ ë‹¤ë¥¸ í•¨ìˆ˜ë¥¼ ë°˜í™˜í•˜ëŠ” ë©”ì„œë“œ

```java
public static <T> List<T> filter(List<T> list, Predicate<T> predicate) {
    List<T> result = new ArrayList<>();
    for (T e: list) {
        if (predicate.test(e)) {
            result.add(e);
        }
    }
    return result;
}
```

```java
@Test
public void testFilter() {
    List<Integer> numbers = List.of(1, 2, 3, 4);

    assertThat(Filter.filter(numbers, i -> i % 2 == 0))
            .isEqualTo(List.of(2, 4));
}
```

# ë””ë²„ê¹…

## ìŠ¤íƒ íŠ¸ë ˆì´ìŠ¤ í™•ì¸

- ì˜ˆì™¸ ë°œìƒì‹œ í”„ë¡œê·¸ë¨ ì‹¤í–‰ì´ ì¤‘ë‹¨ë˜ë©´ ìŠ¤íƒ í”„ë ˆì„ì—ì„œ ì •ë³´ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤

### ëŒë‹¤ì™€ ìŠ¤íƒ íŠ¸ë ˆì´ìŠ¤

- ëŒë‹¤ëŠ” ì´ë¦„ì´ ì—†ê¸° ë•Œë¬¸ì— ë³µì¡í•œ ìŠ¤íƒ íŠ¸ë ˆì´ìŠ¤ ìƒì„±ë¨ â¡ï¸ ìŠ¤íƒ íŠ¸ë ˆì´ìŠ¤ì— ì˜ˆì™¸ê°€ ë°œìƒí•œ í•¨ìˆ˜ì˜ ì´ë¦„ì´ ëª…ì‹œì ìœ¼ë¡œ ë“œëŸ¬ë‚˜ì§€ ì•ŠìŒ
- ëŒë‹¤ í‘œí˜„ì‹ê³¼ ê´€ë ¨í•œ ìŠ¤íƒ íŠ¸ë ˆì´ìŠ¤ëŠ” ì´í•´í•˜ê¸° ì–´ë ¤ìš¸ ìˆ˜ ìˆë‹¤

```java
List<Point> points = Arrays.asList(new Point(12, 2), null);
points.stream()
        .map(Point::getX)
        .forEach(System.out::println);
```

```bash
Exception in thread "main" java.lang.NullPointerException
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
  # ìŠ¤íŠ¸ë¦¼ íŒŒì´í”„ë¼ì¸ì—ì„œ ì„¸ ë²ˆì§¸ ìŠ¤í…ì˜ ì²« ë²ˆì§¸ ì—°ì‚°ì¸ accept ë©”ì„œë“œì—ì„œ ì˜ˆì™¸ ë°œìƒ
	at java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:992)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at chap09_5.Debugging.main(Debugging.java:11)
```

## ì •ë³´ ë¡œê¹…

```java
List<Integer> numbers = List.of(2, 3, 4, 5);

numbers.stream()
        .map(x -> x + 17)
        .filter(x -> x % 2 == 0)
        .limit(3)
        .forEach(System.out::println); // ì „ì²´ ìŠ¤íŠ¸ë¦¼ ì†Œë¹„
```

- map, filter, limit ê°ê°ì˜ ì—°ì‚°ì´ ì–´ë–¤ ê²°ê³¼ë¥¼ ë„ì¶œí•˜ëŠ”ì§€ í™•ì¸í•˜ê¸°
- `peek`
  - ìŠ¤íŠ¸ë¦¼ì˜ ê° ìš”ì†Œë¥¼ ì†Œë¹„í•œ ê²ƒì²˜ëŸ¼ ë™ì‘í•˜ì§€ë§Œ ì‹¤ì œë¡œ ì†Œë¹„í•˜ì§€ëŠ” ì•ŠìŒ
  - ìì‹ ì´ í™•ì¸í•œ ìš”ì†Œë¥¼ íŒŒì´í”„ë¼ì¸ ë‹¤ìŒ ì—°ì‚°ìœ¼ë¡œ ê·¸ëŒ€ë¡œ ë„˜ê²¨ì¤Œ

```java
List<Integer> result = numbers.stream()
        .peek(x -> System.out.println("from stream: " + x))
        .map(x -> x + 17)
        .peek(x -> System.out.println("after map: " + x))
        .filter(x -> x % 2 == 0)
        .peek(x -> System.out.println("after filter: " + x))
        .limit(3)
        .peek(x -> System.out.println("after limit: " + x))
        .toList();
```

```bash
from stream: 2
after map: 19
from stream: 3
after map: 20
after filter: 20
after limit: 20
from stream: 4
after map: 21
from stream: 5
after map: 22
after filter: 22
after limit: 22
```

## ìƒì„±ìì— ë§¤ê°œë³€ìˆ˜ê°€ ë§ë‹¤ë©´ ë¹Œë”ë¥¼ ê³ ë ¤í•˜ë¼

- ìƒì„±ì, ì •ì  íŒ©í„°ë¦¬ : ì„ íƒì  ë§¤ê°œë³€ìˆ˜ê°€ ë§ì„ ë•Œ ì ì ˆíˆ ëŒ€ì‘í•˜ê¸° ì–´ë µë‹¤

### ì ì¸µì  ìƒì„±ì íŒ¨í„´ - í™•ì¥í•˜ê¸° ì–´ë µë‹¤

```java
public class NutritionFacts {
    private final int servingSize;
    private final int servings;
    private final int calories;
    private final int fat;
    private final int sodium;
    private final int carbohydrate;

    public NutritionFacts(int servingSize, int servings) {
        this(servingSize, servings, 0);
    }

    public NutritionFacts(int servingSize, int servings, int calories) {
        this(servingSize, servings, calories, 0);
    }

    public NutritionFacts(int servingSize, int servings, int calories, int fat) {
        this(servingSize, servings, calories, fat, 0);
    }

    public NutritionFacts(int servingSize, int servings, int calories, int fat, int sodium) {
        this(servingSize, servings, calories, fat, sodium, 0);
    }

    public NutritionFacts(int servingSize, int servings, int calories, int fat, int sodium, int carbohydrate) {
        this.servingSize = servingSize;
        this.servings = servings;
        this.calories = calories;
        this.fat = fat;
        this.sodium = sodium;
        this.carbohydrate = carbohydrate;
    }
}
```

- ì ì¸µì  ìƒì„±ì íŒ¨í„´ì€ ë§¤ê°œë³€ìˆ˜ê°€ ë§ì•„ì§€ë©´ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•˜ê±°ë‚˜ ì½ê¸° ì–´ë µë‹¤

### ìë°”ë¹ˆì¦ˆ íŒ¨í„´(JavaBeans pattern)

- ë§¤ê°œë³€ìˆ˜ê°€ ì—†ëŠ” ìƒì„±ìë¡œ ê°ì²´ë¥¼ ë§Œë“  í›„, setter ë©”ì„œë“œë“¤ì„ í˜¸ì¶œí•´ ì›í•˜ëŠ” ë§¤ê°œë³€ìˆ˜ì˜ ê°’ì„ ì„¤ì •í•˜ëŠ” ë°©ì‹

```java
public class NutritionFacts2 {
    // ë§¤ê°œë³€ìˆ˜ë“¤ì€ (ê¸°ë³¸ê°’ì´ ìˆë‹¤ë©´) ê¸°ë³¸ê°’ìœ¼ë¡œ ì´ˆê¸°ëœë‹¤
    private int servingSize = -1;
    private int servings = -1;
    private int calories = 0;
    private int fat = 0;
    private int sodium = 0;
    private int carbohydrate = 0;

    public NutritionFacts2() {}

    // ì„¸í„° ë©”ì„œë“œë“¤

    public void setServingSize(int servingSize) {
        this.servingSize = servingSize;
    }

    public void setServings(int servings) {
        this.servings = servings;
    }

    public void setCalories(int calories) {
        this.calories = calories;
    }

    public void setFat(int fat) {
        this.fat = fat;
    }

    public void setSodium(int sodium) {
        this.sodium = sodium;
    }

    public void setCarbohydrate(int carbohydrate) {
        this.carbohydrate = carbohydrate;
    }
}
```

```java
public static void main(String[] args) {
    NutritionFacts2 cocaCola = new NutritionFacts2();
    cocaCola.setServingSize(240);
    cocaCola.setServings(8);
    cocaCola.setCalories(100);
    cocaCola.setSodium(35);
    cocaCola.setCarbohydrate(27);
}
```

- ê°ì²´ í•˜ë‚˜ë¥¼ ë§Œë“œë ¤ë©´ ë©”ì„œë“œë¥¼ ì—¬ëŸ¬ ê°œ í˜¸ì¶œí•´ì•¼ í•¨
- ê°ì²´ê°€ ì™„ì „íˆ ì™„ì„±ë˜ê¸° ì „ê¹Œì§€ëŠ” ì¼ê´€ì„±ì´ ë¬´ë„ˆì§„ ìƒíƒœì— ë†“ì„
  - ë²„ê·¸ë¥¼ ì‹¬ì€ ì½”ë“œì™€ ê·¸ ë²„ê·¸ ë•Œë¬¸ì— ëŸ°íƒ€ì„ì— ë¬¸ì œë¥¼ ê²ªëŠ” ì½”ë“œê°€ ë¬¼ë¦¬ì ìœ¼ë¡œ ë©€ë¦¬ ë–¨ì–´ì ¸ ìˆì„ ê²ƒ â¡ï¸ ë””ë²„ê¹… ì–´ë ¤ì›€
- í´ë˜ìŠ¤ë¥¼ ë¶ˆë³€ìœ¼ë¡œ ë§Œë“¤ ìˆ˜ ì—†ìŒ

### `ë¹Œë” íŒ¨í„´`

- í•„ìš”í•œ ê°ì²´ë¥¼ ì§ì ‘ ë§Œë“œëŠ” ëŒ€ì‹ , í•„ìˆ˜ ë§¤ê°œë³€ìˆ˜ë§Œìœ¼ë¡œ ìƒì„±ì(í˜¹ì€ ì •ì  íŒ©í„°ë¦¬)ë¥¼ í˜¸ì¶œí•´ ë¹Œë” ê°ì²´ë¥¼ ì–»ìŒ
- ë¹Œë” ê°ì²´ê°€ ì œê³µí•˜ëŠ” ì¼ì¢…ì˜ ì„¸í„° ë©”ì„œë“œë“¤ë¡œ ì›í•˜ëŠ” ì„ íƒ ë§¤ê°œë³€ìˆ˜ë“¤ì„ ì„¤ì •
- ë§¤ê°œë³€ìˆ˜ê°€ ì—†ëŠ” build ë©”ì„œë“œë¥¼ í˜¸ì¶œ â¡ï¸ ê°ì²´ë¥¼ ì–»ìŒ
- ë³´í†µ ë¹Œë”ëŠ” ìƒì„±í•  í´ë˜ìŠ¤ ì•ˆì— ì •ì  ë©¤ë²„ í´ë˜ìŠ¤ë¡œ ë§Œë“¤ì–´ ë‘ 

```java
public class NutritionFacts3 {
    private final int servingSize;
    private final int servings;
    private final int calories;
    private final int fat;
    private final int sodium;
    private final int carbohydrate;

    public static class Builder {
        // í•„ìˆ˜ ë§¤ê°œë³€ìˆ˜
        private final int servingSize;
        private final int servings;

        // ì„ íƒ ë§¤ê°œë³€ìˆ˜ - ê¸°ë³¸ ê°’ìœ¼ë¡œ ì´ˆê¸°í™”ëœë‹¤
        private int calories = 0;
        private int fat = 0;
        private int sodium = 0;
        private int carbohydrate = 0;

        public Builder(int servingSize, int servings) {
            this.servingSize = servingSize;
            this.servings = servings;
        }

        public Builder calories(int val) {
            calories = val;
            return this;
        }

        public Builder fat(int val) {
            fat = val;
            return this;
        }

        public Builder sodium(int val) {
            sodium = val;
            return this;
        }

        public Builder carbohydrate(int val) {
            carbohydrate = val;
            return this;
        }

        public NutritionFacts3 build() {
            return new NutritionFacts3(this);
        }
    }

    private NutritionFacts3(Builder builder) {
        servingSize = builder.servingSize;
        servings = builder.servings;
        calories = builder.calories;
        fat = builder.fat;
        sodium = builder.sodium;
        carbohydrate = builder.carbohydrate;
    }
}
```

- ìƒì„±ëœ í´ë˜ìŠ¤ëŠ” ë¶ˆë³€
- ë¹Œë”ì˜ ì„¸í„° ë©”ì„œë“œë“¤ : ë¹Œë” ìì‹ ì„ ë°˜í™˜ â¡ï¸ ì—°ì‡„ì ìœ¼ë¡œ í˜¸ì¶œ ê°€ëŠ¥
  - í”Œë£¨ì–¸íŠ¸ API(fluent API), ë©”ì„œë“œ ì—°ì‡„(method chaining)

```java
NutritionFacts3 cocaCola = new Builder(240, 8)
        .calories(100)
        .sodium(35)
        .carbohydrate(27)
        .build();
```

- ì“°ê¸° ì‰½ê³ , ì½ê¸° ì‰½ë‹¤
- íŒŒì´ì¬ê³¼ ìŠ¤ì¹¼ë¼ì˜ ëª…ëª…ëœ ì„ íƒì  ë§¤ê°œë³€ìˆ˜(named optional parameters)ë¥¼ í‰ë‚´ë‚¸ ê²ƒ
- ê³„ì¸µì ìœ¼ë¡œ ì„¤ê³„ëœ í´ë˜ìŠ¤ì™€ í•¨ê»˜ ì“°ê¸°ì— ì¢‹ë‹¤

```java
public abstract class Pizza {
    public enum Topping { HAM, MUSHROOM, ONION, PEPPER, SAUSAGE }
    final Set<Topping> toppings;

    abstract static class Builder<T extends Builder<T>> {
        EnumSet<Topping> toppings = EnumSet.noneOf(Topping.class); // ë¹ˆ EnumSet ìƒì„±
        public T addTopping(Topping topping) {
            toppings.add(Objects.requireNonNull(topping));
            return self();
        }

        abstract Pizza build();

        protected abstract T self();
    }

    Pizza(Builder<?> builder) {
        toppings = builder.toppings.clone(); // ë³µì œë³¸ ìƒì„±
    }
}
```

```java
public class NyPizza extends Pizza {
    public enum Size { SMALL, MEDIUM, LARGE }
    private final Size size;

    public static class Builder extends Pizza.Builder<Builder> {
        private final Size size;

        public Builder(Size size) {
            this.size = Objects.requireNonNull(size);
        }

        @Override
        // ìƒìœ„ í´ë˜ìŠ¤ê°€ ì •ì˜í•œ ë°˜í™˜ íƒ€ì…ì´ ì•„ë‹Œ, ê·¸ í•˜ìœ„ íƒ€ì…ì„ ë°˜í™˜
        // ğŸ©· ê³µë³€ ë°˜í™˜ íƒ€ì´í•‘(covariant return typing)
        // í´ë¼ì´ì–¸íŠ¸ê°€ í˜•ë³€í™˜ì— ì‹ ê²½ ì“°ì§€ ì•Šê³  ë¹Œë” ì‚¬ìš© ê°€ëŠ¥
        public NyPizza build() {
            return new NyPizza(this);
        }

        @Override
        protected Builder self() {
            return this;
        }
    }

    private NyPizza(Builder builder) {
        super(builder);
        size = builder.size;
    }
}
```

```java
public class Calzone extends Pizza {
    private final boolean sauceInside;

    public static class Builder extends Pizza.Builder<Builder> {
        private boolean sauceInside = false;

        public Builder sauceInside() {
            sauceInside  = true;
            return this;
        }

        @Override
        public Calzone build() {
            return new Calzone(this);
        }

        @Override
        protected Builder self() {
            return this;
        }
    }

    private Calzone(Builder builder) {
        super(builder);
        sauceInside = builder.sauceInside;
    }
}
```

```java
NyPizza pizza = new NyPizza.Builder(SMALL)
        .addTopping(SAUSAGE)
        .addTopping(ONION)
        .build();

Calzone calzone = new Builder()
        .addTopping(HAM)
        .sauceInside()
        .build();
```

- ê°€ë³€ì¸ìˆ˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ì—¬ëŸ¬ ê°œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤
- ë©”ì„œë“œë¥¼ ì—¬ëŸ¬ ë²ˆ í˜¸ì¶œí•˜ë„ë¡ í•˜ê³  ê° í˜¸ì¶œ ë•Œ ë„˜ê²¨ì§„ ë§¤ê°œë³€ìˆ˜ë“¤ì„ í•˜ë‚˜ì˜ í•„ë“œë¡œ ëª¨ì„ ìˆ˜ë„ ìˆë‹¤
- ì ì¸µì  ìƒì„±ìë³´ë‹¤ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë¥¼ ì½ê³  ì“°ê¸°ê°€ í›¨ì”¬ ê°„ê²°í•˜ê³ , ìë°”ë¹ˆì¦ˆë³´ë‹¤ í›¨ì”¬ ì•ˆì „í•˜ë‹¤

### ë¹Œë” íŒ¨í„´ ë‹¨ì 

- ê°ì²´ë¥¼ ë§Œë“œë ¤ë©´ ë¹Œë”ë¶€í„° ë§Œë“¤ì–´ì•¼ í•œë‹¤
  - ì„±ëŠ¥ì— ë¯¼ê°í•œ ìƒí™©ì—ì„œëŠ” ë¬¸ì œê°€ ë  ìˆ˜ ìˆë‹¤
- ì½”ë“œê°€ ì¥í™©í•˜ë‹¤ : í•˜ì§€ë§Œ, APIëŠ” ì‹œê°„ì´ ì§€ë‚ ìˆ˜ë¡ ë§¤ê°œë³€ìˆ˜ê°€ ë§ì•„ì§€ëŠ” ê²½í–¥ì´ ìˆë‹¤
  - ìƒì„±ìë‚˜ ì •ì  íŒ©í„°ë¦¬ê°€ ì²˜ë¦¬í•´ì•¼ í•  ë§¤ê°œë³€ìˆ˜ê°€ ë§ë‹¤ë©´ ë¹Œë” íŒ¨í„´ì„ ì„ íƒí•˜ëŠ” ê²Œ ë” ë‚«ë‹¤
